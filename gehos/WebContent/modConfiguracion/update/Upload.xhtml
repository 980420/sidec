<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich" template="#{theme.template}"
	xmlns:a4j="http://richfaces.org/a4j">

	<ui:define name="body">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<!-- Estilos generales -->
		<link
			href="#{facesContext.externalContext.requestContextPath}/modConfiguracion/management/styles/general.css"
			rel="stylesheet" type="text/css" />
		<link href="#{facesContext.externalContext.requestContextPath}/modCommons/modHome/styles/home.css" rel="stylesheet" type="text/css"/>
		<link href="#{facesContext.externalContext.requestContextPath}/modCommons/modHome/styles/dialog.css" rel="stylesheet" type="text/css"/>
		<style type="text/css">
.rich-tabpanel {
	white-space: nowrap !IMPORTANT;
}
.filSepPeq {
	padding-right: 0px;
	padding-top: 0px;
	padding-bottom: 0px;
	padding-left: 0px;
	margin: 0px;
	vertical-align: bottom;
	spacing: 0px;
}

.filSepPeq td {
	padding-right: 0px;
	padding-top: 0px;
	padding-bottom: 0px;
	padding-left: 0px;
	margin: 0px;
	vertical-align: bottom;
	spacing: 0px;
}

.colSepGran {
	padding-right: 25px;
	padding-top: 0px;
	padding-bottom: 0px;
	padding-left: 0px;
	margin: 0px;
	vertical-align: bottom;
	spacing: 0px;
}

.colSepPeq {
	padding-right: 9px;
	padding-top: 0px;
	padding-bottom: 0px;
	padding-left: 0px;
	margin: 0px;
	vertical-align: bottom;
	spacing: 0px;
}

.colSepImg {
	padding-right: 6px; 
	padding-top: 0px;
	padding-bottom: 0px;
	padding-left: 0px;
	margin: 0px;
	vertical-align: bottom;
	spacing: 0px;
}

filSepGran td {
	padding-bottom: 8px;
	vertical-align: top;
}

.filSepGranRA td {
	/*padding-bottom:10px; inicialmente yo lo cambie por 8*/
	padding-bottom: 8px;
	vertical-align: top;
}
.Tabla {
	border: 0px;
	vertical-align: top;
	text-align: left;
	padding: 0px;
	spacing: 0px;
}

.margenSupIzq {
	padding-right: 7px;
	padding-top: 10px;
	padding-bottom: 8px;
	padding-left: 8px;
}
 .noAvailableDay
{ color: red !important;
text-decoration: line-through;
}

.rich-panel-body{
	padding-top:11px !important; 
	padding-left:6px !important; 
	padding-bottom:6px !important;
}

.message {
			background-color:#F0F8FF;
			border:1px solid #FFCC00;
			font-family:"Verdana";
			font-size:10px;
			margin-bottom:5px;
			margin-top:5px;
			padding:5px;
		}
</style>

		<script type="text/javascript">setContentTitle('#{messages.titulo}')		
		</script>

		<h:form id="form" styleClass="create" enctype="multipart/form-data">
			<rich:messages globalOnly="true" styleClass="message"></rich:messages>
			<rich:panel rendered="#{not empty scheduledManagement.hora}">
				<div class="dialog"
					onmouseover="javascript:this.style.color='#000000'" 
					onmouseout="javascript:this.style.color='#15428b'">
					<div style="padding: 6px; " >
						<table cellpadding="0px" cellspacing="0px">
							<tr>
								<td>
									#{messages.scheduled} #{scheduledManagement.hora}
								</td>
								<td width="25px"></td>
								<td>
									<h:commandLink action="#{moduleUploader.cancelRestart()}">
										<h:graphicImage value="/resources/icons/default/acciones/eliminar.png"></h:graphicImage>
									</h:commandLink>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</rich:panel>
			<rich:panel>
				<f:facet name="header">#{messages.modulo}</f:facet>
				<table cellpadding="0px" cellspacing="0px">
					<tr>
						<td>
							<s:fileUpload id="addPhoto" accept="*.*" tabindex="6"
								data="#{moduleUploader.data}"
								fileName="#{moduleUploader.fileName}" 
								required="true" />
							<rich:message for="addPhoto" showDetail="false" tooltip="true" style="color:red;">
								<f:facet name="errorMarker">
									<h:outputLabel value="*" title="#{facesMessages.getCurrentMessagesForControl('addPhoto').get(0).detail}" />
								</f:facet>
							</rich:message>
						</td>
						<td width="25px"></td>
						<td>
							<h:commandButton action="#{moduleUploader.upload()}" value="#{messages.aceptar}" />							
						</td>
					</tr>
				</table>	
			</rich:panel>	
			<br />
			<rich:panel>
				<f:facet name="header">#{messages.Data}</f:facet>
				<rich:tree style="width:300px"
					value="#{moduleUploader.tree}" var="item">
				</rich:tree>
			</rich:panel>
			<br />
			<div align="right">
				<table cellpadding="0px" cellspacing="0px">
					<tr>
						<td>
							<a4j:commandButton value="#{messages.Programar}" style="margin: 0px;" onclick="Richfaces.showModalPanel('addTurno')"/>
							<a4j:commandButton value="#{messages.Reiniciar}" style="margin: 0px; margin-left: 10px;" onclick="Richfaces.showModalPanel('reiniciar')"/>
							<s:button view="/modCommons/modHome/home.gehos" value="#{messages.salir}"
								style="margin-right:0px; margin-left: 10px;">
								<f:param name="idFuncionalidad"
									value="#{activeModule.activeModule.id}" />
								<f:param name="idancestors"
									value="#{activeModule.activeModule.id}a" />
								<f:param name="moduleName"
									value="#{activeModule.activeModuleName}" />
							</s:button>
						</td>
					</tr>
				</table>	
			</div>			
		</h:form>
		
		<rich:modalPanel  id="reiniciar" resizeable="false" 
                      height="120" width="500" zindex="2000" headerClass="barraOp2">
        	<f:facet name="header">#{messages.Reiniciar}</f:facet>
	        <h:form>
		        <table width="100%" cellpadding="0px" cellspacing="0px">
		        	<tr>
		        		<td height="11px" colspan="3"></td>
		        	</tr>
		            <tr>
		            	<td width="6px"></td>
		            	<td>
		            		<table cellpadding="0px" cellspacing="0px">
		            			<tr>
		            				<td>
					            		<h:graphicImage value="/resources/icons/default/acciones/advertencia.png" style="border: 0px;"></h:graphicImage>
					            	</td>
					            	<td width="2px"></td>
					                <td>
					                    <h:outputLabel value="#{messages.alert}"/>
					                </td>
		            			</tr>
		            			<tr>
		            				<td height="8px"></td>
		            			</tr>
		            			<tr>
		            				<td align="center" colspan="3">
		            					<table cellpadding="0px" cellspacing="0px">
		            						<tr>
					            				<td>
					            					#{moduleUploader.key1}:
					            				</td>
					            				<td>
					            					<h:inputText value="#{moduleUploader.keyVal1}" style="width: 50px;" />
					            				</td>
					            				<td width="25px"></td>
					            				<td>
					            					#{moduleUploader.key2}:
					            				</td>
					            				<td>
					            					<h:inputText value="#{moduleUploader.keyVal2}" style="width: 50px;" />
					            				</td>
					            			</tr>
		            					</table>
		            				</td>
		            			</tr>
		            		</table>
		            	</td>
		                <td width="6px"></td>
		            </tr>
		            <tr>
		            	<td width="6px"></td>
		                <td align="center" colspan="2">
		                    <rich:spacer height="8px" style="display: block"></rich:spacer>
		                    <h:commandButton value="#{messages.aceptar}" style="margin: 0px;" action="#{moduleUploader.restart()}" />
		                    <a4j:commandButton value="#{messages.cancelar}" style="margin: 0px; margin-left: 10px;" onclick="Richfaces.hideModalPanel('reiniciar')"/>
		                </td>
		                <td width="6px"></td>
		            </tr>
		            <tr>
		        		<td height="6px" colspan="3"></td>
		        	</tr>
		        </table>
	        </h:form>
	    </rich:modalPanel>
	    <rich:modalPanel id="addTurno" width="500" height="84" autosized="true" resizeable="false">
			<f:facet name="header">
				<h:outputText value="Programar reinicio" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage style="cursor:pointer;" value="/resources/icons/default/acciones/cerrar.gif"
					onclick="javascript:Richfaces.hideModalPanel('addTurno')">
				</h:graphicImage>
			</f:facet>
			<h:form id="nuevoTurno">
				<table cellpadding="0" cellspacing="0">
					<tr>
						<td>
							<table cellspacing="0" cellpadding="0">
								<tr>
									<td >
										<h:outputText value="#{messages['Hora:']}" styleClass="normalText" />
									</td>
									<td width="25px"></td>
									<td>
										<h:outputText value="#{messages['Llaves:']}" styleClass="normalText" />
									</td>
								</tr>
								<tr >
									<td >
										<table border="0" cellpadding="0" cellspacing="0" >
											<tr>
												<td style="width: 40px;">
													<rich:comboBox id="horaInputInicio" width="40" value="#{moduleUploader.hora}"
														enableManualInput="false" suggestionValues="#{moduleUploader.horas}">
													</rich:comboBox>
												</td>
												<td style="padding-right: 2px;">
													<h:outputText value=":" />
												</td>
												<td style="width: 40px;">
													<rich:comboBox id="minInicio" width="40" value="#{moduleUploader.minuto}"
														enableManualInput="false" suggestionValues="#{moduleUploader.minutos}">
													</rich:comboBox>
												</td>
												<td style="width: 43px;">
													<rich:comboBox id="amInicio" width="43px" value="#{moduleUploader.am}"
														enableManualInput="false">
														<f:selectItem itemValue="AM" />
														<f:selectItem itemValue="PM" />
													</rich:comboBox>
												</td>												
											</tr>
										</table>
									</td>
									<td width="25px"></td>
									<td>
										<table cellpadding="0px" cellspacing="0px">
		            						<tr>
					            				<td>
					            					#{moduleUploader.key1}:
					            				</td>
					            				<td>
					            					<h:inputText value="#{moduleUploader.keyVal1}" style="width: 50px;" />
					            				</td>
					            				<td width="25px"></td>
					            				<td>
					            					#{moduleUploader.key2}:
					            				</td>
					            				<td>
					            					<h:inputText value="#{moduleUploader.keyVal2}" style="width: 50px;" />
					            				</td>
					            				<td width="25px"></td>
												<td>
													<h:commandButton id="salvarTurno" action="#{moduleUploader.programRestart()}" value="#{messages.aceptar}"
														style="margin: 0px 0px 0px 0px;" />
													<rich:spacer width="6"></rich:spacer>
												</td>
												<td>
													<a4j:commandButton value="#{messages.cancelar}" type="button" onclick="javascript:Richfaces.hideModalPanel('addTurno'); return false;" />
												</td>
					            			</tr>
		            					</table>
	            					</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</h:form>
		</rich:modalPanel>
	</ui:define>
</ui:composition>

