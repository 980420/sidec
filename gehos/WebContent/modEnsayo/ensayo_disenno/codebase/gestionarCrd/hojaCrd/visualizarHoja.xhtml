<s:div xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<s:div>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript">setContentTitle("#{messages.msg_titulo_modCond}")</script>
		<script type="text/javascript">setWindowTitle("#{messages.msg_titulo_modCond}")</script>
		<link
			href="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/styles/stylesheet.css"
			rel="stylesheet" type="text/css" />
		<h:form id="idForm">
			<rich:messages globalOnly='true' styleClass='message'
				id='globalMessage' ajaxRendered="true" />
			<s:validateAll>
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="#{messages.msg_datosHoja_modCond}" />
					</f:facet>
					<table border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td rowspan="15" class="espacio_corto_h"></td>
							<td><h:outputText
									value="#{messages.msg_nombreHoja_modCond}:"
									styleClass="normalText" /></td>
							<td class="espacio_mediano"></td>
							<td><h:outputText
									value="#{visualizarHoja_Disenno.hoja.nombreHoja}"
									styleClass="normalText" /></td>
							<!-- <td class="espacio_grande"></td>
														<td><h:outputText value="#{messages.msg_cedula}:" styleClass="normalText" /></td>
														<td class="espacio_mediano"></td>
														<td><h:outputText value="#{crearSolicitudExternaControlador.solicitud.medicoExterno.cedula}" styleClass="normalText" /></td>
														<td class="espacio_grande"></td>
														<td><h:outputText value="#{messages.msg_entidad}:" styleClass="normalText" /></td>
														<td class="espacio_mediano"></td>
														<td><h:outputText value="#{crearSolicitudExternaControlador.solicitud.medicoExterno.nombreClinica}" styleClass="normalText" /></td> -->
						</tr>
						<!-- <tr>
												<td colspan="7" class="espacio_corto_v" />
												</tr>
													<tr>
											<td style="vertical-align: top"><h:outputText value="#{messages.msg_fecha_emision}: " styleClass="normaltext" /></td>
											<td class="espacio_mediano" />
											<td style="vertical-align: top"><h:outputLabel id="fecha" styleClass="normalText" value="#{crearSolicitudExternaControlador.solicitud.fecha}">
												<s:convertDateTime pattern="#{messages.msg_patron_fecha}" />
											</h:outputLabel></td>
										</tr> -->
						<td colspan="8" class="espacio_corto_v" />
					</table>
					<rich:panel style="margin-left:6px;margin-right:6px">
						<f:facet name="header">
							<div>#{messages.msg_seciones_modCond}</div>
						</f:facet>
						<div class="espacio_corto_h" width="1px"></div>
						<rich:tabPanel switchType="client" style=" width : 100%;">
							<c:forEach items="#{visualizarHoja_Disenno.secciones}"
								var="seccion">
								<rich:tab label="#{seccion.tituloSeccion}" switchType="client">
									<table>
										<tr>
											<c:set var="cuenta" value="${0}" />
											<c:forEach
												items="#{visualizarHoja_Disenno.listaVariables.get(seccion.id)}"
												var="variable" varStatus="cont">
												<c:set var="columna" value="${variable.numeroColumna}" />

												<c:if
													test="#{cuenta != 0 and (columna == 1 || columna == null)}">
													<tr></tr>
												</c:if>

												<td>
													<table>
														<tr>
															<td><h:outputText
																	rendered="#{not empty variable.encabezadoVariable}"
																	value="#{variable.encabezadoVariable}" /></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td><h:outputText
																	rendered="#{not empty variable.subencabezadoVariable}"
																	value="#{variable.subencabezadoVariable}" /></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td>
																<table>
																	<tr>
																		<td><h:outputText
																				value="#{variable.numeroPregunta}"
																				style="margin-left:8px;margin-right:15px;" /> <h:outputText
																				rendered="#{not empty variable.textoIzquierdaVariable}"
																				value="#{variable.textoIzquierdaVariable}"
																				style="margin-right:8px;" /></td>
																		<td><c:if
																				test="#{variable.presentacionFormulario.nombre == 'text' and variable.tipoDato.codigo != 'DATE'}">
																				<h:inputText
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}" />
																			</c:if> <c:if
																				test="#{(variable.presentacionFormulario.nombre == 'checkbox' or variable.presentacionFormulario.nombre == 'multi-select') and variable.tipoDato.codigo == 'NOM'}">

																				<h:selectManyCheckbox
																					layout="#{variable.ubicacionRespuesta == 'HORIZONTAL' ? 'lineDirection' : 'pageDirection'}"
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}">

																					<f:selectItems
																						value="#{visualizarHoja_Disenno.ValoresRadio(variable.nomenclador)}" />
																				</h:selectManyCheckbox>
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'checkbox' and variable.tipoDato.codigo == 'BL'}">
																				<h:selectBooleanCheckbox
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}">
																				</h:selectBooleanCheckbox>

																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'file'}">
																				<s:fileUpload
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					accept="*.*" tabindex="6">
																				</s:fileUpload>
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'textarea'}">
																				<h:inputTextarea
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}" />
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'radio' and variable.tipoDato.codigo == 'NOM'}">
																				<h:selectOneRadio
																					layout="#{variable.ubicacionRespuesta == 'HORIZONTAL' ? 'lineDirection' : 'pageDirection'}"
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}">
																					<f:selectItems
																						value="#{visualizarHoja_Disenno.ValoresRadio(variable.nomenclador)}" />
																				</h:selectOneRadio>
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'single-select'}">
																				<rich:comboBox
																					defaultLabel="#{messages.msg_seleccione_ensCond}"
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					suggestionValues="#{visualizarHoja_Disenno.Valores(variable.nomenclador)}"
																					enableManualInput="false" />
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'text' and variable.tipoDato.codigo == 'DATE'}">

																				<h:inputText
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					styleClass="likedate">

																				</h:inputText>
																				<script>
																						applyDateMask();
																						</script>

																			</c:if>
																			<c:if
																				test="#{variable.presentacionFormulario.nombre == 'calendar'}">
																				<rich:calendar id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					enableManualInput="false"
																					datePattern="#{messages.lbl_patronFecha_modConfig}" />
																			</c:if> <c:set value="${cuenta + 1}" var="cuenta"></c:set></td>
																		<td><c:if test="#{variable.requerido == true}">
																				<h:outputText style="color:red;" value="*"
																					title="#{empty facesMessages.getCurrentMessagesForControl(visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)) ? '' : facesMessages.getCurrentMessagesForControl(visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)).get(0).getDetail()}" />
																			</c:if></td>
																		<td><h:outputText
																				rendered="#{not empty variable.unidadesVariable}"
																				value="#{variable.unidadesVariable}"
																				style="margin-left:8px;" /></td>
																		<td><h:outputText
																				rendered="#{not empty variable.textoDerechaVariable}"
																				value="#{variable.textoDerechaVariable}"
																				style="margin-left:8px;" /></td>
																		<td></td>

																	</tr>


																</table>
															</td>
														</tr>
													</table>
												</td>
												<td class="colSepGran"></td>

											</c:forEach>
										</tr>
									</table>
									<table>
										<tr>
											<td colspan="6" class="espacio_vertical"></td>
										</tr>
									</table>

									<table width="100%">
										<tr>
											<td width="100%"><c:forEach
													items="#{visualizarHoja_Disenno.listaGrupoVariables.get(seccion.id)}"
													var="grupo" varStatus="cont">
													<c:if
														test="#{visualizarHoja_Disenno.tieneVariableGrupoSeccion(seccion, grupo).size() != 0 and visualizarHoja_Disenno.tieneVariableGrupoSeccion(seccion, grupo) != null}">
														<table width="100%" cellpadding="0" cellspacing="0"
															style="margin: 0px; padding: 0px;">
															<tr>
																<td width="100%"><s:div style="float: right;"
																		rendered="#{true}">
																		<h:outputText style="border: 0px;"
																			reRender="tb#{visualizarHoja_Disenno.concatenarId(grupo.id, seccion.id)}">
																			<h:panelGrid columns="2">
																				<h:graphicImage
																					value="/resources/icons/default/acciones/adicionar.png"
																					style="border:0;" />
																				<h:outputText value="#{messages.adicionarGrupo}" />
																			</h:panelGrid>
																		</h:outputText>
																	</s:div></td>
															</tr>
														</table>
														<rich:dataTable width="100%"
															id="tb#{visualizarHoja_Disenno.concatenarId(grupo.id, seccion.id)}"
															value="#{visualizarHoja_Disenno.listaDataTable}"
															rowKeyVar="pos">
															<f:facet name="header">
																<h:outputText value="#{grupo.encabezado}" />
															</f:facet>
															<c:forEach
																items="#{visualizarHoja_Disenno.tieneVariableGrupoSeccion(seccion, grupo)}"
																var="grupoVariable" varStatus="cont">
																<rich:column>
																	<f:facet name="header">
																		<s:div>
																			<table width="100%" cellpadding="0" cellspacing="0">
																				<tr>
																					<td align="left" width="40px"><h:outputText
																							value="#{grupoVariable.encabezadoVariable}"
																							styleClass="label" /> <c:if
																							test="#{grupoVariable.requerido == true}">
																							<h:outputText style="color:red;" value="*"
																								title="#{empty facesMessages.getCurrentMessagesForControl(visualizarHoja_Disenno.concatenarId(seccion.id, grupoVariable.id)) ? '' : facesMessages.getCurrentMessagesForControl(visualizarHoja_Disenno.concatenarId(seccion.id, grupoVariable.id)).get(0).getDetail()}" />
																						</c:if></td>

																				</tr>
																			</table>
																		</s:div>
																	</f:facet>

																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'text' and grupoVariable.tipoDato.codigo != 'DATE'}">
																		<table>
																			<tr>
																				<td><h:inputText /></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>

																			</tr>
																		</table>
																	</c:if>
																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'text' and grupoVariable.tipoDato.codigo == 'DATE'}">
																		<table>
																			<tr>

																				<td><h:inputText styleClass="likedate">

																					</h:inputText> <script>
																						applyDateMask();
																						</script></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>
																	</c:if>
																	<c:if
																		test="#{(grupoVariable.presentacionFormulario.nombre == 'checkbox' or grupoVariable.presentacionFormulario.nombre == 'multi-select') and grupoVariable.tipoDato.codigo == 'NOM'}">
																		<table>
																			<tr>
																				<td><h:selectManyCheckbox>
																						<f:selectItems
																							value="#{visualizarHoja_Disenno.ValoresRadio(grupoVariable.nomenclador)}" />
																					</h:selectManyCheckbox></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>
																	</c:if>
																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'file'}">
																		<table>
																			<tr>
																				<td><s:fileUpload></s:fileUpload></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>
																	</c:if>

																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'textarea'}">
																		<table>
																			<tr>
																				<td><h:inputTextarea /></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>
																	</c:if>
																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'radio' and grupoVariable.tipoDato.codigo == 'NOM'}">
																		<table>
																			<tr>
																				<td><h:selectOneRadio 
																					layout="#{grupoVariable.ubicacionRespuesta == 'HORIZONTAL' ? 'lineDirection' : 'pageDirection'}"
																					>
																						<f:selectItems
																							value="#{visualizarHoja_Disenno.ValoresRadio(grupoVariable.nomenclador)}" />
																					</h:selectOneRadio></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>
																	</c:if>
																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'single-select'}">
																		<table>
																			<tr>
																				<c:if
																					test="#{grupoVariable.nomenclador.nombre == 'CEA'}">
																					<td><rich:comboBox
																							defaultLabel="#{messages.msg_seleccione_ensCond}"
																							value="#{visualizarHoja_Disenno.ctcCategoria}"
																							suggestionValues="#{visualizarHoja_Disenno.ValoresCEA(grupoVariable.nomenclador)}"
																							enableManualInput="false">
																							<a4j:support ajaxSingle="true" event="onselect"
																								reRender="eventosAdversos" limitToList="true" />
																						</rich:comboBox></td>
																				</c:if>
																				<c:if
																					test="#{grupoVariable.nomenclador.nombre == 'EA'}">
																					<td><a4j:outputPanel id="eventosAdversos">
																							<rich:comboBox
																								defaultLabel="#{messages.msg_seleccione_ensCond}"
																								suggestionValues="#{visualizarHoja_Disenno.ValoresEA(grupoVariable.nomenclador)}"
																								enableManualInput="false"></rich:comboBox>
																						</a4j:outputPanel></td>
																				</c:if>

																				<c:if
																					test="#{grupoVariable.nomenclador.nombre != 'EA' and grupoVariable.nomenclador.nombre != 'CEA'}">
																					<td><rich:comboBox
																							defaultLabel="#{messages.msg_seleccione_ensCond}"
																							suggestionValues="#{visualizarHoja_Disenno.Valores(grupoVariable.nomenclador)}"
																							enableManualInput="false" /></td>
																				</c:if>

																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>

																	</c:if>
																	<c:if
																		test="#{grupoVariable.presentacionFormulario.nombre == 'calendar'}">
																		<table>
																			<tr>

																				<td><rich:calendar id="#{visualizarHoja_Disenno.concatenarId(seccion.id, grupoVariable.id)}"
																					enableManualInput="false"
																					datePattern="#{messages.lbl_patronFecha_modConfig}" /></td>
																				<td><h:outputText
																						rendered="#{not empty grupoVariable.unidadesVariable}"
																						value="#{grupoVariable.unidadesVariable}"
																						style="margin-left:8px;" /></td>


																			</tr>
																		</table>
																	</c:if>
																</rich:column>
															</c:forEach>
															<rich:column width="1px" styleClass="alineacionCentrada">
																<a4j:commandLink title="#{messages.eliminar}"
																	action="#{visualizarHoja_Disenno.EliminarFila(grupo.id, pos)}"
																	rendered="#{visualizarHoja_Disenno.listaDataTable.size() > 1}"
																	style="border: 0px; cursor:pointer;"
																	reRender="tb#{visualizarHoja_Disenno.concatenarId(grupo.id, seccion.id)}">
																	<h:graphicImage
																		value="/resources/icons/default/acciones/eliminar.png"
																		style="border:0;" />
																</a4j:commandLink>
															</rich:column>
														</rich:dataTable>
													</c:if>
												</c:forEach></td>
										</tr>
									</table>
								</rich:tab>
							</c:forEach>

						</rich:tabPanel>
						<div class="espacio_corto_h" width="1px"></div>
						<div colspan="12" class="espacio_final"></div>
					</rich:panel>
				</rich:panel>
			</s:validateAll>
			<rich:spacer height="8px;" width="100%" />
			<div align="right" style="width: 100%">
				<h:commandButton value="#{messages.btn_cancelar_modCond}"
					action="cancelar"
					style="margin-right: 0px; margin-bottom: 0px; margin-top: 0px;"
					immediate="true" />
			</div>
			<script
				src="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/reglas/vendor/jquery1.9.js"
				type="text/javascript"></script>
			<link
				href="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/toastr/toastr.min.css"
				rel="stylesheet" type="text/css" />
			<script
				src="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/toastr/toastr.min.js"
				type="text/javascript"></script>

			<script type="text/javascript" language="javascript"
				src="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/jquery-inputmask/jquery.inputmask.bundle.js">
		</script>

			<script>
		var $j = jQuery.noConflict(true);
		$j(document).ready(function()
		{   	   
			applyDateMask();
		});

		function applyDateMask()
		{
			var allInputsLikeDate = $j(".likedate");
			allInputsLikeDate.inputmask("y/[m]/[d]", { "placeholder": "*", greedy:false });	
			allInputsLikeDate.attr("placeholder","aaaa/mm/dd");
		}

</script>

		</h:form>
	</s:div>
</s:div>