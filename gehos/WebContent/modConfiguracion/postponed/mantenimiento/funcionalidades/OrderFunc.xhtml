<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:a4j="http://richfaces.org/a4j"
      template="#{theme.template}"
                xmlns:rich="http://richfaces.org/rich">
                
<ui:define name="body" >
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript">setContentTitle('Funcionalidades Reorganizadas')</script>
	<style type="text/css">.rich-stglpanel-body{padding:0px}</style>
	<style type="text/css">.rich-panel-body{padding:0px}</style>
	<h:form>
		<rich:panel>
        	<f:facet name="header">
        	
        	</f:facet>
        	<rich:panel>
        	<f:facet name="header">
        		
        	</f:facet>
        		<table cellpadding="0px" cellspacing="0px" border="0px">
        			<tr>
						<td style="height: 11px;" colspan="6">
						</td>
					</tr>
					<tr style="vertical-align: top;">
				<td style="width: 7px;"></td>
				<td>
					
					Inicializar reordenamiento:
					<h:commandButton action="#{funcionalidadesOrganizer.init()}" 
										value="Inicializar" 
										/>
					
				</td>
				<td style="width: 25px"></td>
				<td>
					Reordenar funcionalidades:
					<h:commandButton action="#{funcionalidadesOrganizer.order()}" 
								value="Reordenar" 
								/>
					
				</td>
				<td style="width: 25px"></td>
				<td  style="vertical-align: bottom;">
				</td>
				<td style="width: 25px"></td>
				<td style="vertical-align: bottom;">
				</td>
			</tr>
			<tr>
				<td style="height: 11px;" colspan="6">
				</td>
			</tr>
        		</table>
        	</rich:panel>
        	<s:div rendered="#{empty funcionalidadesOrganizer.changeFunc}">
        		<h:outputText value="No se han realizado cambios en las funcionalidades" />
        	</s:div>
        	<s:div rendered="#{not empty funcionalidadesOrganizer.changeFunc}">
			<table>
				
				<tr>
					<td style="vertical-align: top; width: 30%;">
					
					<rich:dataTable value="#{funcionalidadesOrganizer.changeFunc}" id="funData"
					var="value" width="100%" columnsWidth="5%, "
					rows="8" >
		<f:facet name="header">Listado de Cambios</f:facet>
		<h:column >
			<div align="center">
				        <h:graphicImage title="Ver" style="border: 0px;"
	                   					value="/resources/funcionalidadesIcons/#{value.imagen}"/>
	        </div>
		</h:column>
		<h:column >
			<f:facet name="header">
			   	<h:panelGrid columns="2" style="width: 100%; padding:0px; margin:0px;" 
            		border="0" cellpadding="0" cellspacing="0">
            		<s:div style="float: left;">Funcionalidad</s:div>
	            									
            	</h:panelGrid>
			</f:facet>
			#{value.label}
		</h:column>
		<h:column >
			<f:facet name="header">
			   	<h:panelGrid columns="2" style="width: 100%; padding:0px; margin:0px;" 
            		border="0" cellpadding="0" cellspacing="0">
            		<s:div style="float: left;">Id Anterior</s:div>
	            </h:panelGrid>
			</f:facet>
			#{value.old_id}
		</h:column>
		<h:column >
		<f:facet name="header">
			   	<h:panelGrid columns="2" style="width: 100%; padding:0px; margin:0px;" 
            		border="0" cellpadding="0" cellspacing="0">
            		<s:div style="float: left;">Id Asignado</s:div>
	            </h:panelGrid>
			</f:facet>
			#{value.id}
		</h:column>
		<h:column >
		<f:facet name="header">
			   	<h:panelGrid columns="2" style="width: 100%; padding:0px; margin:0px;" 
            		border="0" cellpadding="0" cellspacing="0">
            		<s:div style="float: left;">Funcionalidad padre</s:div>
	            </h:panelGrid>
			</f:facet>
			#{funcionalidadesOrganizer.obtainLabelPadre(value.id_funcionalidad_padre)}
			
		</h:column>
	</rich:dataTable>
	<div align="center">
		<br/>
		<rich:datascroller for="funData" />
	</div>	
					</td>
				</tr>
				
					
			</table>  
			</s:div>
			<div align="right">
					<h:commandButton action="atras" 
						value="Salir" style="margin-left: 0px; margin-bottom: 0px;" />
			</div>
				    	
    	</rich:panel>
	</h:form>   
	<rich:modalPanel id="panel" 
		                 width="300" 
		                 height="100"
		                 resizeable="false">		                  
				<f:facet name="header">
					<h:panelGroup id="este">
						<h:outputText value="Informacion"></h:outputText>
					</h:panelGroup>
				</f:facet>				
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/resources/icons/default/acciones/informacion.png" />
					</h:panelGroup>
				</f:facet>	
				<h:form>
				<table cellpadding="0"
					   cellspacing="0"
					   width="100%">					   
					   <tr>
					   		<td class="margenSupIzq">
					   		
					   			<table cellpadding="0"
					   				   cellspacing="0">
					   				
					   				<tr>
					   					<td valign="top">
				   							<h:outputText value="Esta operacion puede tardar unos segundos....">
											</h:outputText>
											<br />
											
					   					</td>
					   				</tr>
					   				<tr >
					   					
					   				</tr>
					   				
					   			</table>
					   		
					   		</td>
					   </tr>					   
				</table>
				<br/>
				<div align="center">
						 	<h:graphicImage value="/resources/icons/default/acciones/loading_small.gif"/>
				</div>
				</h:form>							
		</rich:modalPanel>

	
</ui:define>

</ui:composition>














