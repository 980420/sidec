<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:a="http://richfaces.org/a4j"
      template="#{theme.template}"
                xmlns:rich="http://richfaces.org/rich">
                
<ui:define name="body" >
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript">setContentTitle('#{messages.titulo}')</script>
	<style type="text/css">.rich-stglpanel-body{padding:0px}</style>
	<style type="text/css">.rich-panel-body{padding:0px}</style>
	<style>
		.functpanelbody{padding:0px;}.functpanelbody2{padding:5px;}
		.dr-tree-h-text{padding:0px !important; }
		.dr-mpnl-mask-div{
    		background-color: transparent;
		}
		.dr-mpnl-pnl, .dr-mpnl-shadow, .rich-mpnl-shadow {
    		background-color: transparent !important; 
    		border: 1px !important;
    		vertical-align: middle;
		}
	</style>
	<style>
		.functpanelbody{padding:0px;}.functpanelbody2{padding:5px;}
		.iconcell, .labelcell{padding:0px; border: 1px;}
		.strech{
			width:99%; 
		}
		.nostrech{
			width:1%; 
		}
		.rich-message-label {
		/*	border: 1px solid #FFCC00;	padding: 5px; */ 
		/*	background-color: #F0F8FF; */	
			font-size: 10px; font-family: "Verdana";
		/*	position:relative; 
			left: 5px; top: 5px; */
		}
		.custom-error {
			border: 1px solid #FFCC00;
			padding: 5px;
			background-color: #F0F8FF;
			font-size: 10px;
			font-family: "Verdana";
			position: relative;	left: 5px; top: 5px; 
			margin-right: 10px;
		}	
	</style>
	
	<script type="text/javascript">
		function cambiaColor(chk){
			if(chk.parentNode.parentNode.style.backgroundColor == "#f0f0f0"
				|| chk.parentNode.parentNode.style.backgroundColor == "rgb(240, 240, 240)" )
				chk.parentNode.parentNode.style.backgroundColor = "#ffffff";
			else 
				chk.parentNode.parentNode.style.backgroundColor = "#f0f0f0";
		}
		function marcarODesmarcarTodos(id, checked){
			var inputs = document.getElementsByTagName("input");
			for (var i = 0; i != inputs.length; i++) { 
			    name = inputs[i].getAttribute("id"); 
			    disable = inputs[i].getAttribute("disabled");
			    if(disable != "disabled"){ 
				    if (name != null) {
					    if(name.match(id) != null) { 
						    if(inputs[i].checked != checked){
				    			inputs[i].checked = checked;
				    			cambiaColor(inputs[i]);
						    }
					    } 
				    }
			    }
			}
		}
	</script>
	
	<rich:hotKey key="esc" handler="subir()"/>
	 
	<a:form>
		<a:jsFunction name="subir" ajaxSingle="true" status="funcSelectedStatus"
			reRender="aplicarbtn" 
			action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.subir()}"></a:jsFunction>
	</a:form>
	
	
	<a:outputPanel ajaxRendered="true" id="errorOutputPanel">
		<s:div style="height:30px;width:100%"
			rendered="#{facesMessages.getCurrentMessagesForControl('error').size() > 0 }">
			<div class="custom-error">
				<rich:message for="error"></rich:message>
			</div>	
		</s:div>
	</a:outputPanel>
			
	<h:form id="ubicacionesForm">
	
	
	<a:keepAlive beanName="departamentosNoClinicosPorEntidadManagerBulkStyle"  />

	<table width="100%" cellpadding="5px" cellspacing="0px" style="vertical-align: top;">
		<tr>

		<td style="vertical-align: top; width: 45%;">
			<rich:panel  bodyClass="functpanelbody2" id="error">
				<f:facet name="header" >
					<a:status stopText="#{messages.stop}" for="functsstree"
							  startText="#{messages.start}..." id="funcstatus"
							  onstart="document.body.style.cursor='wait'; Richfaces.showModalPanel('ajaxLoadingModalBox',{left:1, top:1});" 
     						  onstop="document.body.style.cursor='default'; Richfaces.hideModalPanel('ajaxLoadingModalBox');">
					</a:status>
				</f:facet>
				<div style="border: 1px; top: 2px; position: relative;" > 
				<a:region id="functsstree" >
				<a:outputPanel ajaxRendered="true">
				
				<rich:dragIndicator id="treeDragIndicator">
			        <f:facet name="single">
			        	<h:panelGrid columns="2">
				            <h:graphicImage  styleClass="indicatorPicture" value="/resources/modCommon/ubicacionesimages/{iconname}" />
				            <h:outputLabel value="{label}" />
			        	</h:panelGrid>
			        </f:facet>
				</rich:dragIndicator>
				
				<s:div style="margin-left:1px;">
					<h:panelGrid columns="2" cellpadding="0" cellspacing="0">
						<h:graphicImage
							value="/resources/modConfiguracion/hospital-icon.png"
							height="16" />
						<a:commandLink
							action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(null, null, null, null)}"
							value="#{messages.entidad}" style="margin-left:1px;"
							status="funcSelectedStatus" ajaxSingle="true"
							reRender="settingsdiv, aplicarbtn" />
					</h:panelGrid>
				</s:div>
												
				<rich:tree  changeExpandListener="#{departamentosNoClinicosPorEntidadManagerBulkStyle.treeBuilder.OnNodeCollapseExpand}"
							value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.treeBuilder.treeData}"
							switchType="ajax" preserveModel="state" preserveDataInRequest="true"
							treeNodeVar="treenode"     dragIndicator="treeDragIndicator"
							style="width:200px"        nodeFace="#{node.toString()}"
							var="node" id="functree"   dropListener="#{departamentosNoClinicosPorEntidadManagerBulkStyle.processDrop}"
							componentState="#{treeStateController.departamentosNoClinicosPorEntidadTreeState}" >
					
						<rich:treeNode type="entidad" 
							icon="#{modulosPorEntidadManager.entidadIcon(node.value)}"
							iconLeaf="#{modulosPorEntidadManager.entidadIcon(node.value)}">
								<a:commandLink value="#{node.value.nombre}"
									status="funcSelectedStatus" 
									ajaxSingle="true" immediate="true"
									event="onclick"
									onclick="javascript:scroll(0,0)"
									action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(node, treenode)}"
									reRender="errorOutputPanel, settingsdiv, detailspanelheader, modalpanelsdiv, aplicarbtn" >
								</a:commandLink>
						</rich:treeNode>
						
						<rich:treeNode type="departamento" 
							icon="/resources/modCommon/ubicacionesimages/habitaciones.png"
							iconLeaf="/resources/modCommon/ubicacionesimages/habitaciones.png">
								<h:panelGrid columns="2" cellpadding="0" cellspacing="0">
									
									<s:div rendered="false">
									<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.entidadTieneDepartamento(node.entidadID, node.id)}">
										<input type="checkbox" checked="checked"
											onclick="var departamentId = #{node.id}; var entityId = #{node.entidadID}; removeDepartToEntity(departamentId, entityId);" />
									</s:div>
									<s:div rendered="#{not departamentosNoClinicosPorEntidadManagerBulkStyle.entidadTieneDepartamento(node.entidadID, node.id)}">
										<input type="checkbox" 
											onclick="var departamentId = #{node.id}; var entityId = #{node.entidadID}; addDepartToEntity(departamentId, entityId);" />
									</s:div>
									</s:div>
									<a:commandLink value="#{node.value.nombre} "
										status="funcSelectedStatus" 
										
										ajaxSingle="true" immediate="true"
										event="onclick"
										onclick="javascript:scroll(0,0)"
										action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(node, treenode)}"
										reRender="errorOutputPanel, settingsdiv, detailspanelheader, modalpanelsdiv, aplicarbtn" >
									</a:commandLink>
								</h:panelGrid>
						</rich:treeNode>
						
						<rich:treeNode type="servicio" 
							icon="/resources/funcionalidadesIcons/configuracion/funcionalidades.png"
							iconLeaf="/resources/funcionalidadesIcons/configuracion/funcionalidades.png">
								<h:panelGrid columns="2" cellpadding="0" cellspacing="0">
									<s:div rendered="false">
									<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.entidadTieneServicio(node.entidadID, node.id)}">
										<input type="checkbox" checked="checked" 
											onclick="var serviceId = #{node.id}; var entityId = #{node.entidadID}; removeServiceToEntity(serviceId, entityId);" />
									</s:div>
									<s:div rendered="#{not departamentosNoClinicosPorEntidadManagerBulkStyle.entidadTieneServicio(node.entidadID, node.id)}">
										<input type="checkbox" 
											onclick="var serviceId = #{node.id}; var entityId = #{node.entidadID}; addServiceToEntity(serviceId, entityId);" />
									</s:div>
									</s:div>
									<a:commandLink value="#{node.value.nombre} "
										status="funcSelectedStatus" 
										
										ajaxSingle="true" immediate="true"
										event="onclick"
										onclick="javascript:scroll(0,0)"
										action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(node, treenode)}"
										reRender="errorOutputPanel, settingsdiv, detailspanelheader, modalpanelsdiv, aplicarbtn" >
									</a:commandLink>
								</h:panelGrid>
						</rich:treeNode>

						<rich:treeNode type="especialidad" 
							icon="/resources/funcionalidadesIcons/configuracion/servicios.png"
							iconLeaf="/resources/funcionalidadesIcons/configuracion/servicios.png">
								<h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="cursor:default;">
									<s:div rendered="false">
									<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.entidadTieneEspecialidad(node.entidadID, node.id)}">
										<input type="checkbox" checked="checked" 
											onclick="var especialtyId = #{node.id}; var entityId = #{node.entidadID}; removeEspecialtyToEntity(especialtyId, entityId);"/>
									</s:div>
									<s:div rendered="#{not departamentosNoClinicosPorEntidadManagerBulkStyle.entidadTieneEspecialidad(node.entidadID, node.id)}">
										<input type="checkbox" 
											onclick="var especialtyId = #{node.id}; var entityId = #{node.entidadID}; addEspecialtyToEntity(especialtyId, entityId);" />
									</s:div>
									</s:div>
									<a:commandLink value="#{node.value.nombre} "
										status="funcSelectedStatus" 
										rendered="false"
										ajaxSingle="true" immediate="true"
										event="onclick"
										onclick="javascript:scroll(0,0)"
										action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(node, treenode)}"
										reRender="errorOutputPanel, settingsdiv, detailspanelheader, modalpanelsdiv" >
									</a:commandLink>
									<h:outputText value="#{node.value.nombre}" />
								</h:panelGrid>
						</rich:treeNode>
				</rich:tree>
				</a:outputPanel>
				</a:region>
				</div>
			</rich:panel>	
		</td>
	
		<td style="vertical-align: top; width: 55%;">
			<a:region >
			<a:outputPanel ajaxRendered="true">
			<rich:panel bodyClass="functpanelbody" id="childfuncspanel" rendered="true">
				<f:facet name="header">
					<a:status id="funcstatus2"
							  onstart="document.body.style.cursor='wait'; Richfaces.showModalPanel('ajaxLoadingModalBox',{left:1, top:1});" 
     						  onstop="document.body.style.cursor='default'; Richfaces.hideModalPanel('ajaxLoadingModalBox');">
					</a:status>
					<s:div id="detailspanelheader" > 
					
						<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem == null}">
							#{messages.entidad}
						</s:div>
						
						<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString() == 'entidad'}">
							<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
								<h:graphicImage
									value="#{modulosPorEntidadManager.entidadIcon(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.value)}"
									height="16" width="16" />
								<rich:spacer width="3"/>	
								<h:outputLabel 
									value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.value.nombre}" />
							</h:panelGrid> 
						</s:div>					

						<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString() == 'departamento'}">
							<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
								<h:graphicImage
									value="/resources/modCommon/ubicacionesimages/habitaciones.png"
									height="16" width="16" />
								<rich:spacer width="3"/>	
								<h:outputLabel 
									value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.value.nombre}" />
							</h:panelGrid> 
						</s:div>					

						<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString() == 'servicio'}">
							<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
								<h:graphicImage
									value="/resources/funcionalidadesIcons/configuracion/funcionalidades.png"
									height="16" width="16" />
								<rich:spacer width="3"/>	
								<h:outputLabel 
									value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.value.nombre}" />
							</h:panelGrid> 
						</s:div>					

					</s:div>
				</f:facet>
				
				<a:status id="funcSelectedStatus" forceId="true" 
					  onstart="Richfaces.showModalPanel('ajaxLoadingModalBox',{left:1, top:-15});
					  		   javascript:document.getElementById('ubicacionesForm:settsdiv').style.display = 'none';
					  		   javascript:document.getElementById('ubicacionesForm:loadingdiv').style.display = ''"
					  onstop="Richfaces.hideModalPanel('ajaxLoadingModalBox');
					  		  javascript:document.getElementById('ubicacionesForm:loadingdiv').style.display = 'none';
					  		  javascript:document.getElementById('ubicacionesForm:settsdiv').style.display = ''">
				  <f:facet name="start">
				  </f:facet>
			    </a:status>
			    <s:div id="loadingdiv" style="text-align: center; width: 100%; display:none;">
				  <br/><br/>
					 <h:graphicImage url="/resources/icons/default/acciones/loading_small.gif" />
				  <br/><br/><br/>	 
				</s:div>	 
				<s:div id="settsdiv">
					<s:div id="settingsdiv" style="display: inline;">
					
					<s:div rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem == null}" id="entidadestable">
						<h:dataTable value="#{modulosPorEntidadManager.entidades()}" 
							var="entidad" border="1" columnClasses="strech, nostrech"
							style="width:100%; text-align:left; border: 1px solid #d0d7e5; border-collapse:collapse;"
							cellspacing="0" cellpadding="0"
							rowClasses="dr-table-firstrow2">											
							<h:column>
								<f:facet name="header">
									<div style="background-color: ##{theme.headercolor}; cursor: default;">#{messages.nombre}</div>
								</f:facet>
								<h:panelGrid columns="2" cellpadding="0" cellspacing="0">
									<h:graphicImage
										value="#{modulosPorEntidadManager.entidadIcon(entidad)}"
										height="16" width="16" 
										style="padding: 2px 2px 2px 2px" />
									<a:commandLink 
										ajaxSingle="true" 
										reRender="settingsdiv, detailspanelheader, aplicarbtn" limitToList="true"
										value="#{entidad.nombre}" status="funcSelectedStatus"
										action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(entidad.id)}"
										style="color: ##{theme.linkscolor}; position:relative; left:-1px;" />

								</h:panelGrid>
							</h:column>
							<h:column rendered="false">
								<f:facet name="header">
									<div style="background-color: ##{theme.headercolor}; cursor: default;">
										<span style=" margin-left:2px; margin-right:2px; ">#{messages.visible}</span>
									</div>
								</f:facet>
								<div align="center">
									<a:commandLink
										status="funcstatus2" rendered="#{not entidad.eliminado}"
										ajaxSingle="true" limitToList="true" reRender="entidadestable"
										action="#{modulosPorEntidadManager.cambiarVisibilidadDeEntidad(entidad.id)}">
										<h:graphicImage
											value="/resources/modConfiguracion/visible.png" width="14"
											height="14" style="border:0px;"
											title="#{messages.cambvisible}" />
									</a:commandLink> 
									<a:commandLink status="funcstatus2" limitToList="true" reRender="entidadestable"
										rendered="#{entidad.eliminado}" ajaxSingle="true"
										action="#{modulosPorEntidadManager.cambiarVisibilidadDeEntidad(entidad.id)}" >
										<h:graphicImage
											value="/resources/modConfiguracion/not-visible.png"
											width="14" height="14" style="border:0px;"
											title="#{messages.cambvisible}" />
									</a:commandLink>
								</div>
							</h:column>
						</h:dataTable>
					
					</s:div>								
					<s:div 
						rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString().equals('entidad')}">
							<h:dataTable value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.departments()}" var="depart"
								 border="1" columnClasses="strech, nostrech"
								 style="width:100%; text-align:left; border: 1px solid #d0d7e5; border-collapse:collapse;"
								  cellspacing="0" cellpadding="0" rowClasses="dr-table-firstrow2" >
								<f:facet name="header">
									<div style="background-color: ##{theme.headercolor}; cursor: default;">#{messages.dpto}</div>
								</f:facet>
								<h:column>
									<f:facet name="header">
										<div style="background-color: ##{theme.headercolor}; cursor: default;">#{messages.nombre}</div>
									</f:facet>
									<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
										<h:graphicImage value="/resources/modCommon/ubicacionesimages/habitaciones.png" height="16" width="16" />
										<h:outputLabel value="#{depart.value.nombre}" style="margin-left: 3px;" rendered="false"/>
										<a:commandLink 
											ajaxSingle="true"
											reRender="settingsdiv, detailspanelheader" limitToList="true"
											value="#{depart.value.nombre}" status="funcSelectedStatus"
											action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(depart.id, depart.entidadID)}"
											style="color: ##{theme.linkscolor}; position:relative; left:2px;" />
										</h:panelGrid>
								</h:column>
								<h:column >
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="#{messages.existe}" style="cursor:pointer; margin-left:2px;" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer; margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodosdepexistenMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>									
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox id="departa" value="#{depart.existe}" 
											onclick="cambiaColor(this)" />
									</s:div>
								</h:column>
								<h:column >
									<f:facet name="header">
										<div style="background-color: ##{theme.headercolor}; cursor: default;">
											<span style="margin-left: 2px; margin-right: 2px;">#{messages.visible}</span>
										</div>
									</f:facet>
									<div align="center" style="cursor: default;" >
										<h:graphicImage value="/resources/modConfiguracion/visible-disable.png"
											rendered="#{not depart.existe}"
											width="14" height="14"
											style="border:0px; cursor: default;" title="#{messages.cambvisible}" /> 
										<s:div rendered="#{depart.existe}">
											<a:commandLink status="funcstatus2" 
													rendered="#{depart.visible}" ajaxSingle="true"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeDepartmentVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, depart.getId())}">
													<h:graphicImage
														value="/resources/modConfiguracion/visible.png"
														width="14" height="14"
														style="border:0px;" title="#{messages.cambvisible}" />
											</a:commandLink> 
											<a:commandLink status="funcstatus2" 
													rendered="#{not depart.visible}" ajaxSingle="true"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeDepartmentVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, depart.getId())}">
													<h:graphicImage
														value="/resources/modConfiguracion/not-visible.png"
														width="14" height="14"
														style="border:0px;" title="#{messages.cambvisible}" />
											</a:commandLink>
										</s:div>
									</div>
								</h:column>
							</h:dataTable>
					</s:div>
					<s:div 
						rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString().equals('departamento')}">
							<h:dataTable value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.services(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.id)}" 
								var="service" border="1" columnClasses="strech, nostrech"
								style="background-color:#ffffff;width:100%; text-align:left; border: 1px solid #d0d7e5; border-collapse:collapse;"
								cellspacing="0" cellpadding="0" rowClasses="dr-table-firstrow2" 
								>
								<f:facet name="header">
									<div style="background-color: ##{theme.headercolor}; cursor: default;">#{messages.servicio}</div>
								</f:facet>
								<h:column>
									<f:facet name="header" >
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											Nombre
										</s:div>
									</f:facet>
									<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
										<h:graphicImage value="/resources/funcionalidadesIcons/configuracion/funcionalidades.png" height="16" width="16" />
										<h:outputLabel value="#{service.value.nombre}" style="margin-left: 3px;" rendered="false"/>
										<a:commandLink 
											ajaxSingle="true"
											reRender="settingsdiv, detailspanelheader" limitToList="true"
											value="#{service.value.nombre}" status="funcSelectedStatus"
											action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.setSelectedItem(service.id, service.entidadID, 0)}"
											style="color: ##{theme.linkscolor}; position:relative; left:2px;" />
									</h:panelGrid>
								</h:column>
								<h:column >
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="#{messages.existe}" style="cursor:pointer; margin-left:2px;" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer;margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodosexistenMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox id="serviciosdep" value="#{service.existe}" 
											onclick="cambiaColor(this)"  />
									</s:div>
								</h:column>
								<h:column >
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"  
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="Cons." style="cursor:pointer;margin-left:2px;" title="#{messages.tconsultae}" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer; margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodosconsultaMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox value="#{service.tieneConsultaExterna}" 
									  		id="consulta" disabled="#{not service.existe}"
									  		onclick="cambiaColor(this)"  />
									</s:div>
								</h:column>
								<h:column>
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"  
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="Hosp." style="cursor:pointer;margin-left:2px;" title="#{messages.thosp}" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer; margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodoshospMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox value="#{service.tieneHospitalizacion}" 
											id="hospit" disabled="#{not service.existe}" 
											onclick="cambiaColor(this)" />
									</s:div>
								</h:column>
								<h:column rendered="true">
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<span style="margin-left: 2px; margin-right: 2px;">#{messages.visible}</span>
										</s:div>
									</f:facet>
									<div align="center" style="cursor: default;" >
										<h:graphicImage value="/resources/modConfiguracion/visible-disable.png"
											rendered="#{not service.existe}"
											width="14" height="14"
											style="border:0px; cursor: default;" title="#{messages.cambvisible}" /> 
										<s:div rendered="#{service.existe}">
											<a:commandLink status="funcstatus2" 
													rendered="#{service.visible}"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeServiceVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, service.id)}">
													<h:graphicImage
														value="/resources/modConfiguracion/visible.png"
														width="14" height="14"
														style="border:0px; height : 14px;" title="#{messages.cambvisible}" />
											</a:commandLink> 
											<a:commandLink status="funcstatus2" 
													rendered="#{not service.visible}"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeServiceVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, service.id)}">
													<h:graphicImage
														value="/resources/modConfiguracion/not-visible.png"
														width="14" height="14"
														style="border:0px; height : 14px;" title="#{messages.cambvisible}" />
											</a:commandLink>
										</s:div>
									</div>
								</h:column>
							</h:dataTable>
							<s:div style="border-left: 1px solid #d0d7e5;
										  border-right: 1px solid #d0d7e5;
										  border-bottom: 1px solid #d0d7e5;"
								rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0}">
								<rich:spacer height="10" style="display:block"/>
								<h:outputLabel value="#{messages.listavacia}" 
								 	style="margin-left:7px;" />
								<rich:spacer height="5" style="display:block"/>
							</s:div>
							
					</s:div>
					<s:div 
						rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString().equals('servicio')}">
							<h:dataTable value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.servicesOfServices(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.id)}" 
								var="service" border="1" columnClasses="strech, nostrech"
								style="width:100%; text-align:left; border: 1px solid #d0d7e5; border-collapse:collapse;"
								cellspacing="0" cellpadding="0" rowClasses="dr-table-firstrow2" >
								<f:facet name="header">
									<div style="background-color: ##{theme.headercolor}; cursor: default;">#{messages.servicio}</div>
								</f:facet>
								<h:column>
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											#{messages.nombre}
										</s:div>
									</f:facet>
									<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
										<h:graphicImage value="/resources/funcionalidadesIcons/configuracion/funcionalidades.png" height="16" width="16" />
										<h:outputLabel value="#{service.value.nombre}" style="margin-left: 3px;" />
									</h:panelGrid>
								</h:column>
								<h:column >
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="#{messages.existe}" style="cursor:pointer;margin-left:2px;" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer;margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodosexistenMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>									
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox id="serviciosserv" value="#{service.existe}" 
										onclick="cambiaColor(this)" />
									</s:div>
								</h:column>
								<h:column>
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"  
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="Cons." style="cursor:pointer;margin-left:2px;" title="#{messages.tconsultae}" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer;margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodosconsultaMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>
									</f:facet>									
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox value="#{service.tieneConsultaExterna}"
											id="consulta" disabled="#{not service.existe}" 
											onclick="cambiaColor(this)" />
									</s:div>
								</h:column>
								<h:column>
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"  
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="Hosp." style="cursor:pointer;margin-left:2px;" title="#{messages.thosp}" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer;margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodoshospMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>									
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox value="#{service.tieneHospitalizacion}"
											id="hospit" disabled="#{not service.existe}" 
											onclick="cambiaColor(this)" />
									</s:div>
								</h:column>
								<h:column rendered="true">
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0)}">
											<span style="margin-left: 2px; margin-right: 2px;">#{messages.visible}</span>
										</s:div>
									</f:facet>
									<div align="center" style="cursor: default;">
										<h:graphicImage value="/resources/modConfiguracion/visible-disable.png"
											rendered="#{not service.existe}"
											width="14" height="14"
											style="border:0px; cursor: default;" title="#{messages.cambvisible}" /> 
										<s:div rendered="#{service.existe}">
											<a:commandLink status="funcstatus2" 
													rendered="#{service.visible}"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeServiceVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, service.id)}">
													<h:graphicImage
														value="/resources/modConfiguracion/visible.png"
														width="14" height="14"
														style="border:0px;" title="#{messages.cambvisible}" />
											</a:commandLink> 
											<a:commandLink status="funcstatus2" 
													rendered="#{not service.visible}"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeServiceVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, service.id)}">
													<h:graphicImage
														value="/resources/modConfiguracion/not-visible.png"
														width="14" height="14"
														style="border:0px;" title="#{messages.cambvisible}" />
											</a:commandLink>
										</s:div>
									</div>
								</h:column>
							</h:dataTable>
							
							<s:div style="border-left: 1px solid #d0d7e5;
										  border-right: 1px solid #d0d7e5;
										  border-bottom: 1px solid #d0d7e5;"
								rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.visibleServices.size() == 0}">
								<rich:spacer height="10" style="display:block"/>
								<h:outputLabel value="#{messages.listavacia}" 
								 	style="margin-left:7px;" />
								<rich:spacer height="5" style="display:block"/>
							</s:div>
							
							<br/>
							<h:dataTable value="#{departamentosNoClinicosPorEntidadManagerBulkStyle.especialties(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.id)}" 
								var="especialty" border="1" columnClasses="strech, nostrech"
								style="width:100%; text-align:left; border: 1px solid #d0d7e5; border-collapse:collapse;"
								cellspacing="0" cellpadding="0" rowClasses="dr-table-firstrow2" 
								id="especialidadesdatatable" >
								<f:facet name="header">
									<div style="background-color: ##{theme.headercolor}; cursor: default;">#{messages.espe}</div>
								</f:facet>
								<h:column>
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleEspecialties.size() == 0 )}">
											Nombre
										</s:div>
									</f:facet>
									<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
										<h:graphicImage value="/resources/funcionalidadesIcons/configuracion/servicios.png" height="16" width="16" />
										<h:outputLabel value="#{especialty.value.nombre}" style="margin-left: 3px;" />
									</h:panelGrid>
								</h:column>
								<h:column >
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleEspecialties.size() == 0 )}">
											<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
												<h:outputLabel value="#{messages.existe}" style="cursor:pointer;margin-left:2px;" /> 
											    <h:graphicImage value="/resources/modConfiguracion/todos.png" 
											    	style="cursor:pointer;margin-right:2px;" >
											    </h:graphicImage>
											    <rich:componentControl 
													event="onclick" 
													for="marcartodasespexistenMenuItem"
													operation="show">
												</rich:componentControl>
											</h:panelGrid>
										</s:div>										
									</f:facet>
									<s:div style="text-align:center; cursor: default;" >
										<h:selectBooleanCheckbox id="especs" value="#{especialty.existe}" 
										onclick="cambiaColor(this)" />
									</s:div>
								</h:column>
								<h:column >
									<f:facet name="header">
										<s:div style="background-color: ##{theme.headercolor}; cursor: default;"
											rendered="#{not (departamentosNoClinicosPorEntidadManagerBulkStyle.visibleEspecialties.size() == 0 )}">
											<span style="margin-left: 2px; margin-right: 2px;">#{messages.visible}</span>
										</s:div>
									</f:facet>
									<div align="center" style="cursor: default;">
										<h:graphicImage value="/resources/modConfiguracion/visible-disable.png"
											rendered="#{not especialty.existe}"
											width="14" height="14"
											style="border:0px; cursor: default;" title="#{messages.cambvisible}" /> 
										<s:div rendered="#{especialty.existe}">
											<a:commandLink status="funcstatus2" 
													rendered="#{especialty.visible}" ajaxSingle="true"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeEspecialtyVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, especialty.getId())}">
													<h:graphicImage
														value="/resources/modConfiguracion/visible.png"
														width="14" height="14"
														style="border:0px;" title="#{messages.cambvisible}" />
											</a:commandLink> 
											<a:commandLink status="funcstatus2" 
													rendered="#{not especialty.visible}" ajaxSingle="true"
													action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.changeEspecialtyVisibility(departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.entidadID, especialty.getId())}">
													<h:graphicImage
														value="/resources/modConfiguracion/not-visible.png"
														width="14" height="14"
														style="border:0px;" title="#{messages.cambvisible}" />
											</a:commandLink>
										</s:div>
									</div>
								</h:column>							
							</h:dataTable>	
							
							<s:div style="border-left: 1px solid #d0d7e5;
										  border-right: 1px solid #d0d7e5;
										  border-bottom: 1px solid #d0d7e5;"
								rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.visibleEspecialties.size() == 0 }">
								<rich:spacer height="10" style="display:block"/>
								<h:outputLabel value="#{messages.listavacia}" 
								 	style="margin-left:7px;" />
								<rich:spacer height="5" style="display:block"/>
							</s:div>
							
					</s:div>
					<s:div 
						rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem.toString().equals('especialidad')}">
							#{messages.espesele}
					</s:div>
			    </s:div>
			    </s:div>
			    
			    </rich:panel>
			    </a:outputPanel>
			    
			    
			
			<s:div style="text-align: right;">
				<a:outputPanel id="aplicarbtn" >
				<a:commandButton
					rendered="#{departamentosNoClinicosPorEntidadManagerBulkStyle.selectedItem != null}" 
					action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.aplicarCambios()}" 
					value="#{messages.aplicar}" 
					status="funcstatus2" />
				</a:outputPanel>
				<s:button view="/modCommons/modHome/home.gehos" value="#{messages.salir}" style="margin-right:0px"
							rendered="#{not identificadorManager.editing}">						     
					<f:param name="idFuncionalidad" value="#{activeModule.activeModule.id}" />
					<f:param name="idancestors" value="#{activeModule.activeModule.id}a" />
		      		<f:param name="moduleName" value="#{activeModule.activeModuleName}" />		
		 		</s:button>
			</s:div>
			</a:region>
		</td>
		</tr>
	</table>
	
	</h:form>
	
	<a:form>
		<a:jsFunction name="cambiarTieneHospitalizacionAServicio" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.cambiarTieneHospitalizacionAServicio()}">
			<a:actionparam name="serviceId" 
						assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.hospitalizacionServicioIdToChange}" />
			<a:actionparam name="entityId" 
						assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.hospitalizacionServicioEntityIdToChange}" />
		</a:jsFunction>
		<a:jsFunction name="cambiarTieneConsultaAServicio" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.cambiarTieneConsultaAServicio()}">
			<a:actionparam name="serviceId" 
						assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.consultaServicioIdToChange}" />
			<a:actionparam name="entityId" 
						assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.consultaServicioEntityIdToChange}" />
		</a:jsFunction>
	
		<a:jsFunction name="addEspecialtyToEntity" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.adicionarEspecialidadAEntidad()}">
			<a:actionparam name="especialtyId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.especialtyIdToAdd}" />
			<a:actionparam name="entityId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.especialtyEntityIdToAdd}" />
		</a:jsFunction>
		<a:jsFunction name="removeEspecialtyToEntity" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.eliminarEspecialidadAEntidad()}">
			<a:actionparam name="especialtyId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.especialtyIdToRemove}" />
			<a:actionparam name="entityId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.especialtyEntityIdToRemove}" />
		</a:jsFunction>
		<a:jsFunction name="addServiceToEntity" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.adicionarServicioAEntidad()}">
			<a:actionparam name="serviceId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.serviceIdToAdd}" />
			<a:actionparam name="entityId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.serviceEntityIdToAdd}" />
		</a:jsFunction>
		<a:jsFunction name="removeServiceToEntity" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.eliminarServicioAEntidad()}">
			<a:actionparam name="serviceId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.serviceIdToRemove}" />
			<a:actionparam name="entityId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.serviceEntityIdToRemove}" />
		</a:jsFunction>
		<a:jsFunction name="addDepartToEntity" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.adicionarDepartamentoAEntidad()}">
			<a:actionparam name="departamentId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.departamentIdToAdd}" />
			<a:actionparam name="entityId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.departamentEntityIdToAdd}" />
		</a:jsFunction>
		<a:jsFunction name="removeDepartToEntity" ajaxSingle="true" status="funcstatus2"
				action="#{departamentosNoClinicosPorEntidadManagerBulkStyle.eliminarDepartamentoAEntidad()}">
			<a:actionparam name="departamentId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.departamentIdToRemove}" />
			<a:actionparam name="entityId" assignTo="#{departamentosNoClinicosPorEntidadManagerBulkStyle.departamentEntityIdToRemove}" />
		</a:jsFunction>
	</a:form>
	
	<rich:modalPanel id="ajaxLoadingModalBox" minHeight="750" minWidth="1200" 
	        height="750" width="1200" zindex="2000">
	     <s:div rendered="false">  
	           <img id="favsloadingdiv" 
	        	src="#{facesContext.externalContext.requestContextPath}/resources/icons/default/acciones/loading_small.gif"
	        	style="position: absolute; top: 0px; left: 0px;" />
	     </s:div>  
	</rich:modalPanel> 	
	
	<rich:contextMenu attached="false" id="marcartodosexistenMenuItem" 
					submitMode="none" hideDelay="100000" showDelay="0" >
        <rich:menuItem value="Marcar todos" onclick="marcarODesmarcarTodos('existe', true)" 
        		icon="/resources/modConfiguracion/ck.png"  />
        <rich:menuItem value="Desmarcar todos" onclick="marcarODesmarcarTodos('existe', false)" 
        		icon="/resources/modConfiguracion/dck.png" />
    </rich:contextMenu>
	
	<rich:contextMenu attached="false" id="marcartodosconsultaMenuItem" 
					submitMode="none" hideDelay="100" showDelay="0" >
        <rich:menuItem value="Marcar todos" onclick="marcarODesmarcarTodos('consulta', true)" 
        		icon="/resources/modConfiguracion/ck.png"  />
        <rich:menuItem value="Desmarcar todos" onclick="marcarODesmarcarTodos('consulta', false)" 
        		icon="/resources/modConfiguracion/dck.png" />
    </rich:contextMenu>
    
	<rich:contextMenu attached="false" id="marcartodoshospMenuItem" 
					submitMode="none" hideDelay="100" showDelay="0" >
        <rich:menuItem value="Marcar todos" onclick="marcarODesmarcarTodos('hospit', true)" 
        		icon="/resources/modConfiguracion/ck.png"  />
        <rich:menuItem value="Desmarcar todos" onclick="marcarODesmarcarTodos('hospit', false)" 
        		icon="/resources/modConfiguracion/dck.png" />
    </rich:contextMenu>
    
	<rich:contextMenu attached="false" id="marcartodosdepexistenMenuItem" 
					submitMode="none" hideDelay="100" showDelay="0" >
        <rich:menuItem value="Marcar todos" onclick="marcarODesmarcarTodos('departa', true)" 
        		icon="/resources/modConfiguracion/ck.png"  />
        <rich:menuItem value="Desmarcar todos" onclick="marcarODesmarcarTodos('departa', false)" 
        		icon="/resources/modConfiguracion/dck.png" />
    </rich:contextMenu>
	
	<rich:contextMenu attached="false" id="marcartodasespexistenMenuItem" 
					submitMode="none" hideDelay="100" showDelay="0" >
        <rich:menuItem value="Marcar todos" onclick="marcarODesmarcarTodos('especs', true)" 
        		icon="/resources/modConfiguracion/ck.png"  />
        <rich:menuItem value="Desmarcar todos" onclick="marcarODesmarcarTodos('especs', false)" 
        		icon="/resources/modConfiguracion/dck.png" />
    </rich:contextMenu>
</ui:define>

</ui:composition>






