<! DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
  <meta charset="UTF-8">
     <script type="text/javascript" language="javascript" src="./assets/chart.js"></script>
     <script type="text/javascript" language="javascript" src="./assets/chartjs-plugin-datalabels.js"></script>
   
</head>
<body>

     <canvas id="procesoCompletamientoDatosCRDChart"></canvas>

    <script type="text/javascript">

    var iframe = parent.document.getElementById('procesoCompletamientoDatosCRDChartIframe');
    var width = iframe.offsetWidth;
    var height = iframe.offsetHeight;

    var canvas = document.getElementById('procesoCompletamientoDatosCRDChart');

    canvas.width = width;
    canvas.height = height;

    
    function procesoCompletamientoDatosCRD() {
        
        let noIniciadosProcesoCompletamientoDatos = parent.document.getElementById('noIniciadosProcesoCompletamientoDatos').value;
        let iniciadosProcesoCompletamientoDatos = parent.document.getElementById('iniciadosProcesoCompletamientoDatos').value;
        let completadosProcesoCompletamientoDatos = parent.document.getElementById('completadosProcesoCompletamientoDatos').value;
        let atrasadosProcesoCompletamientoDatos = parent.document.getElementById('atrasadosProcesoCompletamientoDatos').value;
        let firmadosProcesoCompletamientoDatos = parent.document.getElementById('firmadosProcesoCompletamientoDatos').value;
               
        var ctxProcesoCompletamientoDatosCRDChart = document.getElementById('procesoCompletamientoDatosCRDChart').getContext('2d');
        var procesoInclusionSujetoChart = new Chart(ctxProcesoCompletamientoDatosCRDChart, {
            type: 'bar',
            data: {
                labels: ['No Iniciados', 'Iniciados', 'Completados', 'Atrasados', 'Firmados'],
                datasets: [{
                    label: 'Proceso Completamiento Datos CRD',
                    data: [noIniciadosProcesoCompletamientoDatos, iniciadosProcesoCompletamientoDatos,
                           completadosProcesoCompletamientoDatos, atrasadosProcesoCompletamientoDatos,
                           firmadosProcesoCompletamientoDatos],
                    backgroundColor: [                        
		                'rgba(20, 117, 191, 0.75)', 
						'rgba(241, 214, 92, 0.75)', 
						'rgba(43, 91, 44, 0.75)',
						'rgba(255, 0, 0, 0.75)', 
		                'rgba(17, 63, 108, 0.75)'
                    ],
                    borderColor: [
						'rgba(20, 117, 191, 1)', 
						'rgba(241, 214, 92, 1)', 
						'rgba(43, 91, 44, 1)',
						'rgba(255, 0, 0, 1)', 
						'rgba(17, 63, 108, 1)'
                    ],
                    borderWidth: 0.5,
                    datalabels: {
						anchor: 'end',
						align: 'top',
						offset: 5
                    }
                }]
            },
            plugins: [ChartDataLabels],
            options: {
            	plugins: {
            		//Cambio de cursor al pasar por la leyenda
                	legend: {
                		onHover: (event, chartElement) => {
     						event.native.target.style.cursor = 'pointer';
     					},
     					onLeave: (event, chartElement) => {
     						event.native.target.style.cursor = 'default';
     					}
                    } 					
                },
				scales: {
					y:{
						beginAtZero: true,
						grace: '10%'
					}
				}
            }
        });
      
    }
    window.onload = procesoCompletamientoDatosCRD;
        
    </script>
</body>
</html>
