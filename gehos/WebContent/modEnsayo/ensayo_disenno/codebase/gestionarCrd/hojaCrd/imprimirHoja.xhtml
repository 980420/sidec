<!-- Exportar datos de la hoja CRD -->
<s:div xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">


	<s:div>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript">setContentTitle("#{messages.msg_titulo_ens}")</script>
		<script type="text/javascript">setWindowTitle("#{messages.msg_titulo_ens}")</script>
		<link
			href="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/styles/stylesheet.css"
			rel="stylesheet" type="text/css" />
		<link rel='stylesheet'
			href='#{facesContext.externalContext.requestContextPath}/modEnsayo/ensayo_disenno/codebase/reglas/style/richfileupload.css'
			type='text/css' />
		<link
			href="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/toastr/toastr.min.css"
			rel="stylesheet" type="text/css" />
		<script type="text/javascript">
		
		function imprSelec(idForm)
	    {
	    var ficha=document.getElementById(idForm);
	    var ventimp=window.open(' ','popimpr');
	    ventimp.document.write(ficha.innerHTML);
	    ventimp.document.close();
	    var css = ventimp.document.createElement("link");
	    css.setAttribute("href", "estilo_print.css");
	    css.setAttribute("rel", "stylesheet");
	    css.setAttribute("type", "text/css");
	    css.setAttribute("media", "print");
	    ventimp.document.head.appendChild(css);
	    ventimp.print();
	    ventimp.close();
	    }</script>
	    <style media="print">
	     #sidebar {
	        display:none;
	        
	     }       
	     @media print {
		   rich:comboBox{
		   display: none;
		   
		    }
		    
		    #parte1 {display:none;}
		   
		}   main {
    float:none;
    display:block;
}  
		   
	</style>
		
		<link
			href="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/styles/stylesheet.css"
			rel="stylesheet" type="text/css" />
		<link
			href="#{facesContext.externalContext.requestContextPath}/layouts/alas-layout/themes/green/stylesheet/green.css"
			rel="stylesheet" type="text/css"></link>

		<h:form id="idForm">
			
			<rich:messages globalOnly='true' styleClass='message'
				id='globalMessage' ajaxRendered="true" />
			<s:validateAll>
				<rich:panel switchType="client" style=" width : 100%;">
					<f:facet name="header">
						<h:outputText value="#{messages.msg_titulo_ens}" />
					</f:facet>
					<table border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td rowspan="15" class="espacio_corto_h"></td>
							<td><h:outputText
									value="#{messages.msg_nombreHoja_modCond}:"
									styleClass="normalText" /></td>
							<td class="espacio_mediano"></td>
							<td><h:outputText
									value="#{visualizarHoja_Disenno.hoja.nombreHoja}"
									styleClass="normalText" /></td>
						</tr>

						<td colspan="8" class="espacio_corto_v" />
					</table>
					<rich:panel switchType="client"
						style="margin-left:6px;margin-right:6px;">
						<f:facet name="header">
							<div>#{messages.msg_seciones_modCond}</div>
						</f:facet>
						<c:forEach items="#{visualizarHoja_Disenno.secciones}"
							var="seccion">
							<rich:panel switchType="client" style=" width : 100%;">
								<f:facet name="header">#{seccion.tituloSeccion}</f:facet>
							
								<table width="100%">
									<tr>
										<c:set var="cuenta" value="${0}" />
										<c:forEach
											items="#{visualizarHoja_Disenno.listaVariables.get(seccion.id)}"
											var="variable" varStatus="cont">
											<c:set var="columna" value="${variable.numeroColumna}" />
											<c:if
												test="#{ not visualizarHoja_Disenno.perteneceVariableAGrupo(variable, seccion)}">
												<c:if
													test="#{cuenta != 0 and (columna == 1 || columna == null)}">
													<tr></tr>
												</c:if>

												<td>
													<table>
														<tr>
															<td><h:outputText
																	rendered="#{not empty variable.encabezadoVariable}"
																	value="#{variable.encabezadoVariable}" /></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td><h:outputText
																	rendered="#{not empty variable.subencabezadoVariable}"
																	value="#{variable.subencabezadoVariable}" /></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
															<td></td>
														</tr>
														<tr>
															<td>
																<table>
																	<tr>
																		<td><h:outputText
																				value="#{variable.numeroPregunta}"
																				style="margin-left:8px;margin-right:15px;" /> <h:outputText
																				rendered="#{not empty variable.textoIzquierdaVariable}"
																				value="#{variable.textoIzquierdaVariable}"
																				style="margin-right:8px;" /></td>
																		<td><c:if
																				test="#{variable.presentacionFormulario.nombre == 'text'}">
																				<h:inputText
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}" />
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'checkbox' and variable.tipoDato.codigo == 'NOM'}">

																				<h:selectManyCheckbox
																					layout="#{variable.ubicacionRespuesta == 'HORIZONTAL' ? 'lineDirection' : 'pageDirection'}"
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}">

																					<f:selectItems
																						value="#{visualizarHoja_Disenno.ValoresRadio(variable.nomenclador)}" />
																				</h:selectManyCheckbox>
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'checkbox' and variable.tipoDato.codigo == 'BL'}">
																				<h:selectBooleanCheckbox
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}">
																				</h:selectBooleanCheckbox>

																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'file'}">
																				<s:fileUpload
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					accept="*.*" tabindex="6">
																				</s:fileUpload>
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'textarea'}">
																				<h:inputTextarea
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}" />
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'radio' and variable.tipoDato.codigo == 'NOM'}">
																				<h:selectOneRadio
																					layout="#{variable.ubicacionRespuesta == 'HORIZONTAL' ? 'lineDirection' : 'pageDirection'}"
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}">
																					<f:selectItems
																						value="#{visualizarHoja_Disenno.ValoresRadio(variable.nomenclador)}" />
																				</h:selectOneRadio>
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'single-select'}">
																				<rich:comboBox
																					defaultLabel=""
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					suggestionValues="#{visualizarHoja_Disenno.Valores(variable.nomenclador)}"
																					enableManualInput="false" />
																			</c:if> <c:if
																				test="#{variable.presentacionFormulario.nombre == 'calendar'}">

																				<h:inputText
																					id="#{visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)}"
																					styleClass="likedate">

																				</h:inputText>
																				<script>
																						applyDateMask();
																						</script>

																			</c:if> <c:set value="${cuenta + 1}" var="cuenta"></c:set></td>
																		<td><c:if test="#{variable.requerido == true}">
																				<h:outputText style="color:red;" value="*"
																					title="#{empty facesMessages.getCurrentMessagesForControl(visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)) ? '' : facesMessages.getCurrentMessagesForControl(visualizarHoja_Disenno.concatenarId(seccion.id, variable.id)).get(0).getDetail()}" />
																			</c:if></td>
																		<td><h:outputText
																				rendered="#{not empty variable.unidadesVariable}"
																				value="#{variable.unidadesVariable}"
																				style="margin-left:8px;" /></td>
																		<td><h:outputText
																				rendered="#{not empty variable.textoDerechaVariable}"
																				value="#{variable.textoDerechaVariable}"
																				style="margin-left:8px;" /></td>
																		<td></td>
																		<td></td>

																	</tr>
																</table>
															</td>
														</tr>
													</table>
												</td>


												<td class="colSepGran"></td>


											</c:if>
										</c:forEach>
									</tr>
								</table>
								<table>
									<tr>
										<td colspan="6" class="espacio_vertical"></td>
									</tr>
								</table>

								<table width="100%">
									<tr>
										<td width="100%"><c:forEach
												items="#{visualizarHoja_Disenno.listaGrupoVariables.get(seccion.id)}"
												var="grupo" varStatus="cont">
												<c:if
													test="#{visualizarHoja_Disenno.tieneVariableGrupoSeccion(seccion, grupo).size() != 0 and visualizarHoja_Disenno.tieneVariableGrupoSeccion(seccion, grupo) != null}">

													<rich:dataTable width="100%"
														id="tb#{visualizarHoja_Disenno.concatenarId(grupo.id, seccion.id)}"
														value="#{visualizarHoja_Disenno.grupoWrapper(grupo.id).listaVarWrapper.get(0).listaValores}"
														rowKeyVar="pos">
														<f:facet name="header">
															<h:outputText value="#{grupo.encabezado}" />
														</f:facet>
														<c:forEach
															items="#{visualizarHoja_Disenno.tieneVariableGrupoSeccion(seccion, grupo)}"
															var="grupoVariable" varStatus="cont">
															<rich:column>
																<f:facet name="header">
																	<s:div>
																		<table width="100%" cellpadding="0" cellspacing="0">
																			<tr>
																				<td align="left" width="40px"><h:outputText
																						value="#{grupoVariable.encabezadoVariable}"
																						styleClass="label" /></td>
																			</tr>
																		</table>
																	</s:div>
																</f:facet>

																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'text' and grupoVariable.tipoDato.codigo != 'DATE'}">
																	<table>
																		<tr>
																			<td><h:inputText /></td>
																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>
																		</tr>
																	</table>
																</c:if>
																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'checkbox'}">
																	<table>
																		<tr>
																			<td><h:selectBooleanCheckbox value="dghdh" /></td>
																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>


																		</tr>
																	</table>
																</c:if>
																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'file'}">
																	<table>
																		<tr>
																			<td><s:fileUpload></s:fileUpload></td>
																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>


																		</tr>
																	</table>
																</c:if>

																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'textarea'}">
																	<table>
																		<tr>
																			<td><h:inputTextarea /></td>
																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>


																		</tr>
																	</table>
																</c:if>
																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'radio'}">
																	<table>
																		<tr>
																			<td><h:selectOneRadio>
																					<f:selectItems value="dfghfh" />
																				</h:selectOneRadio></td>
																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>


																		</tr>
																	</table>
																
																</c:if>
																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'single-select'}">
																	<table>
																		<tr>
																			<c:if
																				test="#{grupoVariable.nomenclador.nombre == 'CEA'}">
																				<td><rich:comboBox
																						defaultLabel=""
																						value="#{visualizarHoja_Disenno.categoria}"
																						suggestionValues="#{visualizarHoja_Disenno.ValoresCEA(grupoVariable.nomenclador)}"
																						enableManualInput="false">
																						<a4j:support ajaxSingle="true" event="onselect"
																							reRender="eventosAdversos" limitToList="true" />
																					</rich:comboBox></td>
																			</c:if>
																			<c:if
																				test="#{grupoVariable.nomenclador.nombre == 'EA'}">
																				<td><a4j:outputPanel id="eventosAdversos">
																						<rich:comboBox
																							defaultLabel=""
																							suggestionValues="#{visualizarHoja_Disenno.ValoresEA(grupoVariable.nomenclador)}"
																							enableManualInput="false"></rich:comboBox>
																					</a4j:outputPanel></td>
																			</c:if>

																			<c:if
																				test="#{grupoVariable.nomenclador.nombre != 'EA' and grupoVariable.nomenclador.nombre != 'CEA'}">
																				<td><rich:comboBox
																						defaultLabel=""
																						suggestionValues="#{visualizarHoja_Disenno.Valores(grupoVariable.nomenclador)}"
																						enableManualInput="false" /></td>
																			</c:if>

																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>


																		</tr>
																	</table>

																</c:if>
																<c:if
																	test="#{grupoVariable.presentacionFormulario.nombre == 'calendar' or (grupoVariable.presentacionFormulario.nombre == 'text' and grupoVariable.tipoDato.codigo == 'DATE')}">
																	<table>
																		<tr>

																			<td><h:inputText styleClass="likedate">

																				</h:inputText> <script>
																						applyDateMask();
																						</script></td>
																			<td><h:outputText
																					rendered="#{not empty grupoVariable.unidadesVariable}"
																					value="#{grupoVariable.unidadesVariable}"
																					style="margin-left:8px;" /></td>


																		</tr>
																	</table>
																
																	
																		
																</c:if>
															</rich:column>	
														</c:forEach>
													</rich:dataTable>
												</c:if>
											</c:forEach></td>
									</tr>
								</table>
							</rich:panel>
						</c:forEach>

	
						<div class="espacio_corto_h" width="1px"></div>
						<div colspan="12" class="espacio_final"></div>
					</rich:panel>
				</rich:panel>
				
			
			</s:validateAll>
			
			
			<rich:spacer height="8px;" width="100%" />

			<script
				src="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/reglas/vendor/jquery1.9.js"
				type="text/javascript"></script>
			<link
				href="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/toastr/toastr.min.css"
				rel="stylesheet" type="text/css" />
			<script
				src="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/toastr/toastr.min.js"
				type="text/javascript"></script>

			<script type="text/javascript" language="javascript"
				src="#{facesContext.externalContext.requestContextPath}/resources/modEnsayo/js/jquery-inputmask/jquery.inputmask.bundle.js">
		</script>

			<script>
		var $j = jQuery.noConflict(true);
		$j(document).ready(function()
		{   	   
			applyDateMask();
		});

		function applyDateMask()
		{
			var allInputsLikeDate = $j(".likedate");
			allInputsLikeDate.inputmask("y/[m]/[d]", { "placeholder": "*", greedy:false });	
			allInputsLikeDate.attr("placeholder","");
		}

</script>

		</h:form>
		
		<div id="parte1" align="right" style="width: 100%">
				
					<a4j:commandButton value="Exportar"
						onclick="javascript:window.print()"
						
						style="margin-right: 0px; margin-bottom: 0px; margin-top: 0px;"
						immediate="true">
					</a4j:commandButton>
					
					
						
				</div>
	</s:div>
</s:div>